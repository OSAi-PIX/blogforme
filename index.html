<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Local Social Feed</title>
<link rel="stylesheet" href="theme.css">
<script src="data.js"></script>
<style>
body { font-family: monospace; background: var(--bg); color: var(--text); margin:0; }
.container { max-width:900px; margin:20px auto; width:90%; }
nav a { margin:0 10px; color:var(--accent); text-decoration:none; }
.post, .video { border:2px solid var(--border); background: var(--card); padding:15px; margin-bottom:15px; }
</style>
</head>
<body>

<header>
<h1>Local Social Media + Blog</h1>
</header>

<nav>
<a href="index.html">Home</a>
<a href="upload.html">Upload</a>
<a href="login.html">Login</a>
<a href="subscriptions.html">Subscriptions</a>
<a href="trending.html">Trending</a>
<label>Theme:
<select id="theme" onchange="setTheme(this.value)">
<option value="retro">Retro</option>
<option value="dos">DOS</option>
<option value="neon">Neon</option>
<option value="vapor">Vaporwave</option>
<option value="beige">Beige</option>
<option value="modern">Modern</option>
</select>
</label>
</nav>

<div class="container" id="feed"></div>

<script>
function loadTheme() {
  const t = localStorage.getItem("theme") || "retro";
  document.body.className = "theme-" + t;
  document.getElementById("theme").value = t;
}
function setTheme(t) {
  document.body.className = "theme-" + t;
  localStorage.setItem("theme", t);
}

function renderFeed() {
  const feed = document.getElementById("feed");
  const posts = getPosts();
  if (!posts.length) { feed.innerHTML="<p>No posts/videos yet.</p>"; return; }

  feed.innerHTML = posts.map(p => {
    if(p.type==="video"){
      return `<div class="video">
        <a href="video.html?id=${p.id}"><h3>${p.title}</h3></a>
        <small>by ${p.author} - ${p.date}</small>
        <p>${p.description.substring(0,120)}...</p>
      </div>`;
    } else if(p.type==="blog"){
      return `<div class="post">
        <a href="view.html?id=${p.id}"><h3>${p.title}</h3></a>
        <small>by ${p.author} - ${p.date}</small>
        <p>${p.content.substring(0,120)}...</p>
      </div>`;
    }
  }).join("");
}

loadTheme();
renderFeed();
</script>

</body>
</html>
